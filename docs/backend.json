
{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the LinguaTune application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the User entity."
        },
        "googleId": {
          "type": "string",
          "description": "The Google ID of the user, obtained from Google Login."
        },
        "email": {
          "type": "string",
          "description": "Email address of the user.",
          "format": "email"
        },
        "userName": {
          "type": "string",
          "description": "The user's username."
        }
      },
      "required": [
        "id",
        "googleId",
        "email",
        "userName"
      ]
    },
    "CommunityProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "CommunityProfile",
      "type": "object",
      "description": "Represents a user's community profile within the LinguaTune application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Community Profile, typically the same as the user's UID."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:1 CommunityProfile)"
        },
        "name": {
            "type": "string",
            "description": "The user's display name."
        },
        "bio": {
          "type": "string",
          "description": "A short biography of the user."
        },
        "nativeLanguage": {
          "type": "string",
          "description": "The user's native language."
        },
        "learningLanguage": {
          "type": "string",
          "description": "The language the user is learning."
        },
        "theme": {
          "type": "string",
          "description": "The user's selected UI theme.",
          "enum": ["theme-default", "theme-commune", "theme-founder"]
        },
        "academicLevel": {
            "type": "string",
            "description": "The user's AI-analyzed academic level."
        }
      },
      "required": [
        "id",
        "userId",
        "name",
        "bio",
        "nativeLanguage",
        "learningLanguage"
      ]
    },
    "Story": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Story",
      "type": "object",
      "description": "Represents a story generated by the application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Story entity."
        },
        "userId": {
          "type": "string",
          "description": "The ID of the user who generated the story."
        },
        "level": {
          "type": "string",
          "description": "The difficulty level of the story (e.g., beginner, intermediate, advanced)."
        },
        "sourceLanguage": {
            "type": "string",
            "description": "The source language of the story."
        },
        "targetLanguage": {
            "type": "string",
            "description": "The target language of the story."
        },
        "nativeText": {
          "type": "string",
          "description": "The story text in the user's native language."
        },
        "translatedText": {
          "type": "string",
          "description": "The translated story text in the user's selected foreign language."
        },
        "audioUrl": {
          "type": "string",
          "description": "Public URL of the TTS-generated audio file stored in Firebase Storage."
        },
        "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "The timestamp when the story was created."
        }
      },
      "required": [
        "id",
        "userId",
        "level",
        "sourceLanguage",
        "targetLanguage",
        "nativeText",
        "translatedText",
        "audioUrl",
        "createdAt"
      ]
    },
    "HistorySnapshot": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "title": "HistorySnapshot",
        "type": "object",
        "description": "A snapshot of a user's entire story history at a specific point in time.",
        "properties": {
            "id": {
                "type": "string",
                "description": "Unique identifier for the snapshot."
            },
            "userId": {
                "type": "string",
                "description": "The ID of the user who owns this snapshot."
            },
            "createdAt": {
                "type": "string",
                "format": "date-time",
                "description": "The timestamp when the snapshot was created."
            },
            "storyCount": {
                "type": "number",
                "description": "The number of stories in this snapshot."
            },
            "stories": {
                "type": "array",
                "description": "An array containing copies of all stories at the time of the snapshot.",
                "items": {
                    "$ref": "#/backend/entities/Story"
                }
            }
        },
        "required": ["id", "userId", "createdAt", "storyCount", "stories"]
    },
    "Community": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Community",
      "type": "object",
      "description": "Represents a user-created community in the federation.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Community."
        },
        "ownerId": {
          "type": "string",
          "description": "The UID of the user who created the community."
        },
        "name": {
          "type": "string",
          "description": "The name of the community."
        },
        "description": {
          "type": "string",
          "description": "A short description of the community."
        },
        "welcomeMessage": {
          "type": "string",
          "description": "A welcome message for new members."
        },
        "members": {
          "type": "array",
          "description": "A list of AI-generated members for the community.",
          "items": {
            "$ref": "#/backend/entities/Member"
          }
        },
        "flagUrl": {
          "type": "string",
          "description": "The data URI of the AI-generated community flag SVG.",
          "format": "uri"
        }
      },
      "required": ["id", "ownerId", "name", "description", "members"]
    },
    "Member": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Member",
      "type": "object",
      "description": "Represents a member of a community.",
      "properties": {
        "name": {
          "type": "string",
          "description": "The member's unique name."
        },
        "role": {
          "type": "string",
          "description": "The member's role in the community."
        },
        "bio": {
          "type": "string",
          "description": "A short bio for the AI member."
        },
        "type": {
          "type": "string",
          "description": "The type of member.",
          "enum": ["AI", "human"]
        }
      },
      "required": ["name", "role", "bio", "type"]
    },
     "Form": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "title": "Form",
        "type": "object",
        "description": "Represents a single 'thought-form' or conversation starter in the federation.",
        "properties": {
            "id": { "type": "string" },
            "communityId": { "type": "string", "description": "The ID of the community where this form currently resides." },
            "originCommunityId": { "type": "string", "description": "The ID of the community where this form was first created." },
            "originFormId": { "type": "string", "description": "The ID of the original form, if this is an 'echo'." },
            "userId": { "type": "string" },
            "userName": { "type": "string" },
            "userAvatarUrl": { "type": "string", "format": "uri" },
            "type": { "type": "string", "enum": ["text"], "description": "The type of form." },
            "text": { "type": "string", "description": "The content of a text form." },
            "createdAt": { "type": "string", "format": "date-time" },
            "lastEchoAt": { "type": "string", "format": "date-time", "description": "Timestamp of the last time this form was echoed." },
            "echoCount": { "type": "number", "description": "How many times this form has been echoed across communities." },
            "status": { "type": "string", "enum": ["active", "archived"], "description": "The status of the form." },
            "deleted": { "type": "boolean", "description": "Flag indicating if the form is soft-deleted." },
            "deletedAt": { "type": "string", "format": "date-time", "description": "The timestamp when the form was soft-deleted." },
            "audience": { "type": "string", "enum": ["public", "owner"], "description": "Who can see this form." }
        },
        "required": ["id", "communityId", "originCommunityId", "userId", "userName", "type", "createdAt", "status"]
     },
    "Comment": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "title": "Comment",
        "type": "object",
        "description": "Represents a comment on a form.",
        "properties": {
            "id": { "type": "string" },
            "userId": { "type": "string" },
            "userName": { "type": "string" },
            "userAvatarUrl": { "type": "string", "format": "uri" },
            "type": { "type": "string", "enum": ["text"], "description": "The type of comment." },
            "text": { "type": "string", "description": "The content of a text comment." },
            "createdAt": { "type": "string", "format": "date-time" },
            "deleted": { "type": "boolean", "description": "Flag indicating if the comment is soft-deleted." },
            "deletedAt": { "type": "string", "format": "date-time", "description": "The timestamp when the comment was soft-deleted." }
        },
        "required": ["id", "userId", "userName", "type", "createdAt"]
    },
    "Asset": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Asset",
      "type": "object",
      "description": "Represents a physical, virtual, or intellectual property asset in a user's treasury.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the asset." },
        "ownerId": { "type": "string", "description": "The UID of the user who owns the asset." },
        "name": { "type": "string", "description": "The name of the asset." },
        "description": { "type": "string", "description": "A detailed description of the asset." },
        "type": { "type": "string", "enum": ["physical", "virtual", "ip"], "description": "The type of asset." },
        "value": { "type": "number", "description": "The estimated value of the asset in Satoshis." },
        "createdAt": { "type": "string", "format": "date-time", "description": "The timestamp when the asset was declared." },
        "fileUrl": { "type": "string", "format": "uri", "description": "URL to the associated design or data file." },
        "communityId": { "type": "string", "description": "The ID of the community this asset belongs to, if any." }
      },
      "required": ["id", "ownerId", "name", "description", "type", "value", "createdAt"]
    },
    "FabricationOrder": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "FabricationOrder",
      "type": "object",
      "description": "Represents a ticket or order for asset fabrication.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the fabrication order." },
        "userId": { "type": "string", "description": "The UID of the user who placed the order." },
        "assetId": { "type": "string", "description": "Reference to the asset being fabricated from the user's Treasury." },
        "assetName": { "type": "string", "description": "The name of the asset being fabricated." },
        "fileUrl": { "type": "string", "format": "uri", "description": "URL to the design file (e.g., STL, OBJ, PDF)." },
        "supplier": { "type": "string", "description": "The chosen supplier for fabrication (e.g., 'NNO.Studio')." },
        "status": { "type": "string", "enum": ["pending", "in_progress", "completed", "shipped", "cancelled"], "description": "Current status of the fabrication order." },
        "cost": { "type": "number", "description": "The total cost of the fabrication order in Satoshis." },
        "notes": { "type": "string", "description": "Special instructions or notes for the order." },
        "createdAt": { "type": "string", "format": "date-time", "description": "Timestamp of order creation." },
        "updatedAt": { "type": "string", "format": "date-time", "description": "Timestamp of the last status update." }
      },
      "required": ["id", "userId", "assetId", "assetName", "fileUrl", "supplier", "status", "cost", "createdAt"]
    },
    "JoinRequest": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "title": "JoinRequest",
        "type": "object",
        "description": "Represents a user's request to join a community.",
        "properties": {
            "id": { "type": "string", "description": "Unique ID for the join request." },
            "userId": { "type": "string", "description": "The UID of the user requesting to join." },
            "userName": { "type": "string", "description": "The name of the user requesting to join." },
            "userBio": { "type": "string", "description": "The bio of the user requesting to join." },
            "status": { "type": "string", "enum": ["pending", "approved", "rejected"], "description": "The status of the join request." },
            "createdAt": { "type": "string", "format": "date-time" }
        },
        "required": ["id", "userId", "userName", "userBio", "status", "createdAt"]
    },
    "Creation": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Creation",
      "type": "object",
      "description": "Represents a single generative artwork from the Community Gallery.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the creation." },
        "creatorId": { "type": "string", "description": "The UID of the user who created it." },
        "creatorName": { "type": "string", "description": "The name of the creator." },
        "creatorAvatarUrl": { "type": "string", "format": "uri", "description": "The avatar URL of the creator." },
        "prompt": { "type": "string", "description": "The prompt used to generate the artwork." },
        "status": { "type": "string", "enum": ["in-workshop", "published"], "description": "The visibility status of the artwork." },
        "createdAt": { "type": "string", "format": "date-time" },
        "pixels": {
          "type": "array",
          "items": { "$ref": "#/backend/entities/ColorPixel" }
        }
      },
      "required": ["id", "creatorId", "creatorName", "prompt", "status", "createdAt", "pixels"]
    },
    "ColorPixel": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "title": "ColorPixel",
        "type": "object",
        "properties": {
            "x": { "type": "number" },
            "y": { "type": "number" },
            "z": { "type": "number" },
            "color": { "type": "string" }
        },
        "required": ["x", "y", "z", "color"]
    },
    "RoadmapCard": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "RoadmapCard",
      "type": "object",
      "description": "Represents a card on the project roadmap.",
      "properties": {
        "id": { "type": "string" },
        "title": { "type": "string" },
        "description": { "type": "string" },
        "tags": { "type": "array", "items": { "type": "string" } },
        "assignees": { "type": "array", "items": { "type": "string" } }
      },
      "required": ["id", "title", "description"]
    },
    "RoadmapColumn": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "RoadmapColumn",
      "type": "object",
      "description": "Represents a column on the roadmap, containing multiple cards.",
      "properties": {
        "id": { "type": "string", "enum": ["ideas", "nextUp", "inProgress", "alive"] },
        "title": { "type": "string" },
        "cards": { "type": "array", "items": { "$ref": "#/backend/entities/RoadmapCard" } }
      },
      "required": ["id", "title", "cards"]
    },
    "Bug": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Bug",
      "type": "object",
      "description": "Represents a bug report or issue in the system.",
      "properties": {
        "id": { "type": "string" },
        "title": { "type": "string" },
        "description": { "type": "string" },
        "status": { "type": "string", "enum": ["new", "in_progress", "done", "wont_fix"] },
        "priority": { "type": "string", "enum": ["low", "medium", "high"] },
        "reporterId": { "type": "string" },
        "reporterName": { "type": "string" },
        "createdAt": { "type": "string", "format": "date-time" }
      },
      "required": ["id", "title", "description", "status", "priority", "reporterId", "reporterName", "createdAt"]
    },
    "Ambasedor": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Ambasedor",
      "type": "object",
      "description": "Represents the state of a conversation with the Ambasedor SuperAgent.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the conversation session (typically user's UID)." },
        "history": {
          "type": "array",
          "description": "The chat history between the user and the Ambasedor.",
          "items": {
            "$ref": "#/backend/entities/AmbasedorMessage"
          }
        }
      },
      "required": ["id", "history"]
    },
    "AmbasedorMessage": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "AmbasedorMessage",
      "type": "object",
      "description": "Represents a single message in a Ambasedor conversation.",
      "properties": {
        "role": { "type": "string", "enum": ["user", "model"], "description": "The role of the message sender." },
        "text": { "type": "string", "description": "The text content of the message." },
        "tool": { "type": "string", "description": "The name of the tool used, if any." },
        "toolResult": { "type": "string", "description": "The result of the tool call, if any." },
        "timestamp": { "type": "string", "format": "date-time", "description": "The timestamp of the message." }
      },
      "required": ["role", "text", "timestamp"]
    },
    "LeaderboardEntry": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "title": "LeaderboardEntry",
        "type": "object",
        "description": "Represents a user's entry on the leaderboard.",
        "properties": {
            "userId": { "type": "string" },
            "userName": { "type": "string" },
            "score": { "type": "number" },
            "avatarUrl": { "type": "string", "format": "uri" },
            "lastActivity": { "type": "string", "format": "date-time" }
        },
        "required": ["userId", "userName", "score", "lastActivity"]
    },
    "Event": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Event",
      "type": "object",
      "description": "Represents a social event or get-together organized by a community member.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the event." },
        "title": { "type": "string", "description": "The title of the event." },
        "description": { "type": "string", "description": "A detailed description of the event." },
        "date": { "type": "string", "format": "date-time", "description": "The date and time of the event." },
        "location": { "type": "string", "description": "The physical or virtual location of the event." },
        "organizerId": { "type": "string", "description": "The UID of the user who organized the event." },
        "organizerName": { "type": "string", "description": "The name of the event organizer." },
        "attendees": {
          "type": "array",
          "description": "A list of user IDs of those attending.",
          "items": { "type": "string" }
        },
        "communityId": { "type": "string", "description": "The ID of the community this event is associated with (optional)." }
      },
      "required": ["id", "title", "description", "date", "location", "organizerId", "organizerName"]
    },
    "Presence": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Presence",
      "type": "object",
      "description": "Represents a user's online status.",
      "properties": {
        "userId": { "type": "string", "description": "The unique ID of the user." },
        "userName": { "type": "string", "description": "The user's display name." },
        "avatarUrl": { "type": "string", "format": "uri", "description": "URL of the user's avatar." },
        "lastSeen": { "type": "string", "format": "date-time", "description": "The timestamp of when the user was last active." }
      },
      "required": ["userId", "userName", "lastSeen"]
    },
    "WikiArticle": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "WikiArticle",
      "type": "object",
      "description": "Represents a single article within a community's private wiki.",
      "properties": {
        "id": { "type": "string" },
        "title": { "type": "string" },
        "content": { "type": "string" },
        "authorId": { "type": "string" },
        "authorName": { "type": "string" },
        "createdAt": { "type": "string", "format": "date-time" },
        "updatedAt": { "type": "string", "format": "date-time" }
      },
      "required": ["id", "title", "content", "authorId", "authorName", "createdAt", "updatedAt"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous",
      "google.com"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores user profile information. User documents are only accessible by the user themselves. Parameter 'userId' represents the unique identifier of the user.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/stories/{storyId}",
        "definition": {
          "entityName": "Story",
          "schema": {
            "$ref": "#/backend/entities/Story"
          },
          "description": "Stores story information for a specific user. A user can only access their own stories.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            },
            {
              "name": "storyId",
              "description": "The unique identifier for the story."
            }
          ]
        }
      },
       {
        "path": "/users/{userId}/assets/{assetId}",
        "definition": {
          "entityName": "Asset",
          "schema": {
            "$ref": "#/backend/entities/Asset"
          },
          "description": "Stores asset information for a specific user. A user can only access their own assets.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            },
            {
              "name": "assetId",
              "description": "The unique identifier for the asset."
            }
          ]
        }
      },
      {
        "path": "/communities/{communityId}/assets/{assetId}",
        "definition": {
          "entityName": "Asset",
          "schema": { "$ref": "#/backend/entities/Asset" },
          "description": "Stores assets belonging to a specific community.",
          "params": [
            { "name": "communityId", "description": "The unique ID for the community." },
            { "name": "assetId", "description": "The unique ID for the asset." }
          ]
        }
      },
      {
        "path": "/users/{userId}/historySnapshots/{snapshotId}",
        "definition": {
          "entityName": "HistorySnapshot",
          "schema": { "$ref": "#/backend/entities/HistorySnapshot" },
          "description": "Stores snapshots of a user's story history. A user can only access their own snapshots.",
          "params": [
            { "name": "userId", "description": "The unique identifier for the user." },
            { "name": "snapshotId", "description": "The unique identifier for the history snapshot." }
          ]
        }
      },
      {
        "path": "/community-profiles/{userId}",
        "definition": {
          "entityName": "CommunityProfile",
          "schema": {
            "$ref": "#/backend/entities/CommunityProfile"
          },
          "description": "Stores user community profiles. A user can read anyone's profile, but can only write to their own.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            }
          ]
        }
      },
      {
        "path": "/communities/{communityId}",
        "definition": {
          "entityName": "Community",
          "schema": {
            "$ref": "#/backend/entities/Community"
          },
          "description": "Stores all communities in a top-level collection. Communities are publicly readable, but only the owner can update or delete their own community.",
          "params": [
            { "name": "communityId", "description": "The unique ID for the community." }
          ]
        }
      },
       {
        "path": "/communities/{communityId}/forms/{formId}",
        "definition": {
          "entityName": "Form",
          "schema": { "$ref": "#/backend/entities/Form" },
          "description": "Stores forms (conversation starters) for a community.",
          "params": [
            { "name": "communityId", "description": "The ID of the community." },
            { "name": "formId", "description": "The ID of the form." }
          ]
        }
      },
      {
        "path": "/communities/{communityId}/forms/{formId}/comments/{commentId}",
        "definition": {
          "entityName": "Comment",
          "schema": { "$ref": "#/backend/entities/Comment" },
          "description": "Stores comments for a specific form.",
          "params": [
            { "name": "communityId", "description": "The ID of the community." },
            { "name": "formId", "description": "The ID of the form being commented on." },
            { "name": "commentId", "description": "The ID of the comment." }
          ]
        }
      },
      {
        "path": "/communities/{communityId}/joinRequests/{requestId}",
        "definition": {
            "entityName": "JoinRequest",
            "schema": { "$ref": "#/backend/entities/JoinRequest" },
            "description": "Stores requests from users to join a community.",
            "params": [
                { "name": "communityId", "description": "The ID of the community." },
                { "name": "requestId", "description": "The ID of the join request." }
            ]
        }
      },
      {
        "path": "/communities/{communityId}/creations/{creationId}",
        "definition": {
          "entityName": "Creation",
          "schema": { "$ref": "#/backend/entities/Creation" },
          "description": "Stores generated artworks. Creations with status 'published' are public. Others are for members only.",
          "params": [
            { "name": "communityId", "description": "The ID of the community." },
            { "name": "creationId", "description": "The unique ID for the artwork." }
          ]
        }
      },
       {
        "path": "/communities/{communityId}/treasury",
        "definition": {
          "entityName": "Creation",
          "schema": { "$ref": "#/backend/entities/Creation" },
          "description": "A view of all creations (published and in-workshop) for a specific community. Viewable by members only.",
          "params": [
            { "name": "communityId", "description": "The ID of the community." }
          ]
        }
      },
      {
        "path": "/communities/{communityId}/roadmap/{columnId}",
        "definition": {
          "entityName": "RoadmapColumn",
          "schema": { "$ref": "#/backend/entities/RoadmapColumn" },
          "description": "Stores roadmap columns for a specific community. Only community members can view, and only the owner can write.",
          "params": [
            { "name": "communityId", "description": "The ID of the community." },
            { "name": "columnId", "description": "The unique ID for the roadmap column (e.g., 'ideas')." }
          ]
        }
      },
      {
        "path": "/communities/{communityId}/wiki/{articleId}",
        "definition": {
          "entityName": "WikiArticle",
          "schema": { "$ref": "#/backend/entities/WikiArticle" },
          "description": "Stores articles for a community's private wiki. Only community members can read and write.",
          "params": [
            { "name": "communityId", "description": "The ID of the community." },
            { "name": "articleId", "description": "The unique ID for the wiki article." }
          ]
        }
      },
      {
        "path": "/fabricationOrders/{orderId}",
        "definition": {
          "entityName": "FabricationOrder",
          "schema": { "$ref": "#/backend/entities/FabricationOrder" },
          "description": "Stores fabrication orders as a top-level collection. Users can read their own orders, and create new ones. Suppliers can update status.",
          "params": [
            { "name": "orderId", "description": "The unique ID for the fabrication order." }
          ]
        }
      },
      {
        "path": "/roadmap/{columnId}",
        "definition": {
          "entityName": "RoadmapColumn",
          "schema": { "$ref": "#/backend/entities/RoadmapColumn" },
          "description": "Stores roadmap columns and their cards. This collection is publicly readable.",
          "params": [
            { "name": "columnId", "description": "The unique ID for the roadmap column (e.g., 'ideas')." }
          ]
        }
      },
      {
        "path": "/bugs/{bugId}",
        "definition": {
          "entityName": "Bug",
          "schema": { "$ref": "#/backend/entities/Bug" },
          "description": "Stores bug reports. This collection is publicly readable, and any authenticated user can create a new bug report.",
          "params": [
            { "name": "bugId", "description": "The unique ID for the bug report." }
          ]
        }
      },
      {
        "path": "/ambasedor/{userId}",
        "definition": {
          "entityName": "Ambasedor",
          "schema": { "$ref": "#/backend/entities/Ambasedor" },
          "description": "Stores conversation history for each user with the Ambasedor SuperAgent. Users can only access their own conversation history.",
          "params": [
            { "name": "userId", "description": "The unique identifier for the user." }
          ]
        }
      },
       {
        "path": "/leaderboard/{userId}",
        "definition": {
          "entityName": "LeaderboardEntry",
          "schema": { "$ref": "#/backend/entities/LeaderboardEntry" },
          "description": "Stores the leaderboard rankings. Publicly readable, server-side writes only.",
          "params": [
            { "name": "userId", "description": "The user's ID." }
          ]
        }
      },
      {
        "path": "/events/{eventId}",
        "definition": {
          "entityName": "Event",
          "schema": { "$ref": "#/backend/entities/Event" },
          "description": "Stores event information. Events are publicly readable, but only the organizer can update or delete their own event.",
          "params": [
            { "name": "eventId", "description": "The unique ID for the event." }
          ]
        }
      },
      {
        "path": "/presence/{userId}",
        "definition": {
          "entityName": "Presence",
          "schema": { "$ref": "#/backend/entities/Presence" },
          "description": "Stores user presence information. Publicly readable for real-time UIs.",
          "params": [
            { "name": "userId", "description": "The unique identifier for the user." }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed for scalability and discoverability. By placing `communities`, `fabricationOrders`, `bugs`, `leaderboard`, `presence`, and `events` in top-level collections, they become queryable. User-specific data is nested under `/users/{userId}` to ensure privacy. Public profiles are in `/community-profiles` to allow discoverability without exposing private account details. The public roadmap is migrated to Firestore for reliable public read access. The new /ambasedor/{userId} collection stores conversation history privately for each user. Community-specific data like creations and roadmaps are nested under `/communities/{communityId}` for privacy and organization. The 'Message' entity and its corresponding collection have been renamed to 'Form' to better represent the concept of a shareable, trackable thought-form within the federation. The new /presence/{userId} collection will track user online status. The new `/communities/{communityId}/wiki/{articleId}` collection provides a private knowledge base for each community."
  }
}
